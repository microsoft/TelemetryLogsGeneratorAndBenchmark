{
  "templateMetadata": {
    "description": "Job template for Generator job"
  },
  "parameters": {
    "jobName": {
      "type": "string",
      "metadata": {
        "description": "Job name"
      }
    },
    "poolId": {
      "type": "string",
      "metadata": {
        "description": "Pool id"
      }
    },
    "partitionStart": {
      "type": "int",
      "defaultValue": 0,
      "metadata": {
        "description": "Partition start index"
      }
    },
    "partitionEnd": {
      "type": "int",
      "defaultValue": 6,
      "metadata": {
        "description": "Partition end index"
      }
    },
    "size": {
      "type": "string",
      "defaultValue": "HundredTB",
      "metadata": {
        "description": "Size"
      }
    },
    "outputContainerUrl": {
      "type": "string",
      "defaultValue": "YOUR BLOB CONNECTION STRING",
      "metadata": {
        "description": "Output container URL"
      }
    }
  },
  "job": {
    "type": "Microsoft.Batch/batchAccounts/jobs",
    "properties": {
      "id": "[parameters('jobName')]",
      "onAllTasksComplete": "terminateJob",
      "poolInfo": {
        "poolId": "[parameters('poolId')]"
      },
      "taskFactory": {
        "type": "parametricSweep",
        "parameterSets": [
          {
            "start": "[parameters('partitionStart')]",
            "end": "[parameters('partitionEnd')]",
            "step": 1
          }
        ],
        "repeatTask": {
          "displayName": "Task for partition {0}",
          "commandLine": "%AZ_BATCH_APP_PACKAGE_GENERATOR#1.0%/publish/BenchmarkLogGenerator.exe -output:AzureStorage -cc:\"[parameters('outputContainerUrl')]\" -size:[parameters('size')] -partition:{0}"
        }
      }
    }
  }
}